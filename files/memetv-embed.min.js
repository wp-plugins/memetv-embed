(function(e){"use strict";var t,n,r,i,s=[{name:"small",desc:"320x320",checked:true},{name:"medium",desc:"480x480"},{name:"large",desc:"600x600"}],o=function(e){if(!e){return false}return/^https?:\/\/(.*\.)?(memetv\.com)\/(meme|m)\/([a-zA-Z0-9]+)(\/.*)?$/.test(e)},u=function(){if(t&&n&&i){t.show();n.show();i.css("position","absolute");i.css("top",Math.max(0,(e(window).height()-i.outerHeight())/2+e(window).scrollTop())+"px");i.css("left",Math.max(0,(e(window).width()-i.outerWidth())/2+e(window).scrollLeft())+"px")}},a=function(){if(t&&n&&r){t.hide();n.hide();r[0].reset()}},f=function(f,l){var c="memetvembedSettings",h="",p;for(p=0;p<s.length;p++){h+='<input type="radio" name="'+c+'_size" value="'+s[p].name+'" '+(s[p].checked?'checked="checked"':"")+" /> "+s[p].name+" <span>("+s[p].desc+")</span> "}n=e("#"+c);if(n.length==0){n=e('<div id="'+c+'" />');t=e('<div id="'+c+'_overlay" />');i=e('<div id="'+c+'_content">'+'<div class="titlebar">MemeTV Embed Settings <a href="#" id="'+c+'_close">X</a></div>'+'<div class="'+c+'_settings">'+'<form id="'+c+'_form" method="post">'+"<fieldset>"+"<p>"+"<label>Meme Page URL:</label>"+'<input type="text" value="http://" id="'+c+'_input" name="'+c+'_url" />'+"<br /><span>eg. http://memetv.com/meme/1ta/vintage-jlo/</span>"+"</p>"+"<p>"+"<label>Video Size:</label>"+h+"</p>"+"</fieldset>"+'<input type="submit" id="'+c+'_save" value="Insert Code" />'+"</form>"+"</div>"+"</div>");t.appendTo(n);i.appendTo(n);e("#"+c+"_close",i).click(function(){a();return false});n.appendTo("body");r=e("#"+c+"_form");r.submit(function(){var t=e.trim(e("input[name="+c+"_url]",e(this)).val())||null,n=e("input[name="+c+"_size]:checked",e(this)).val()||null;if(f&&n&&f!=""&&o(t)){l.execCommand("mceInsertContent",false,'[memetv url="'+t+'" size="'+n+'" autoplay="0"]');a()}else{alert("Please verify the URL you inserted")}return false})}u()};tinymce.create("tinymce.plugins.memetvembed",{init:function(e,t){e.addButton("memetvembed",{title:"Insert meme",image:t+"/memetv-embed.png",onclick:function(){f(t,e)}})},createControl:function(e,t){return null},getInfo:function(){return{longname:"memeTV",author:"memetv",authorurl:"http://www.memetv.com",infourl:"http://www.memetv.com/plugins/wordpress/memetv-embed",version:"1.0"}}});tinymce.PluginManager.add("memetvembed",tinymce.plugins.memetvembed)})(jQuery)